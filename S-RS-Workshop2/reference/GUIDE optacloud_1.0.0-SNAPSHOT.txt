-- End Point --
http://localhost:8080/kie-server/services/rest/server/containers/optacloud_1.0.0-SNAPSHOT

kieserver:kieserver1!


== PUT ==


-- Authorization --

b4:
authorization: Basic cGxhbm5lcjpQbGFubmVyMTIzXw==
X-KIE-ContentType: xstream
content-type: application/xml

after:
authorization: kieserver:kieserver1!
X-KIE-ContentType: xstream
content-type: application/xml


-- End Point --

ref:
PUT http://localhost:8080/kie-server/services/rest/server/containers/employeerostering_1.0.0-SNAPSHOT/solvers/EmployeeRosteringSolver

b4:
PUT http://localhost:8080/kie-server/services/rest/server/containers/cloudbalancing/solvers/cloudBalancingSolver

after:
PUT http://localhost:8080/kie-server/services/rest/server/containers/optacloud_1.0.0-SNAPSHOT/solvers/cloudBalancingSolver


-- Body --

ref:
<solver-instance>
  <solver-config-file>employeerostering/employeerostering/EmployeeRosteringSolverConfig.solver.xml</solver-config-file>
</solver-instance>

b4:
<solver-instance>
  <solver-config-file>clouddepartment/cloudbalancing/Cloud Balancing Solver Configuration.solver.xml</solver-config-file>
</solver-instance>

after:
<solver-instance>
  <solver-config-file>optacloud/optacloud/cloudSolverConfig.solver.xml</solver-config-file>
</solver-instance>

-- PUT Results --
<solver-instance>
    <container-id>optacloud_1.0.0-SNAPSHOT</container-id>
    <solver-id>cloudBalancingSolver</solver-id>
    <solver-config-file>optacloud/optacloud/cloudSolverConfig.solver.xml</solver-config-file>
    <status>NOT_SOLVING</status>
    <score/>
</solver-instance>


Expires →0
Cache-Control →no-cache, no-store, must-revalidate
X-Powered-By →Undertow/1
Server →WildFly/11
Pragma →no-cache
Date →Wed, 13 Feb 2019 10:09:23 GMT
Connection →keep-alive
X-KIE-ConversationId →%27sample-server%27%3A%27optacloud_1.0.0-SNAPSHOT%27%3A%27optacloud%3Aoptacloud%3A1.0.0-SNAPSHOT%27%3A%2796d6cac0-10a3-4ddd-bf0c-5cbe0e02c4d0%27
Content-Type →application/xml;charset=UTF-8
Content-Length →272


== POST ==


-- End Point --

ref:
POST http://localhost:8080/kie-server/services/rest/server/containers/employeerostering_1.0.0-SNAPSHOT/solvers/EmployeeRosteringSolver/state/solving
b4:
POST http://localhost:8080/kie-server/services/rest/server/containers/cloudbalancing/solvers/cloudBalancingSolver/state/solving
after:
POST http://localhost:8080/kie-server/services/rest/server/containers/optacloud_1.0.0-SNAPSHOT/solvers/cloudBalancingSolver/state/solving


-- Body --

ref:
<employeerostering.employeerostering.EmployeeRoster>
  <employeeList>
    <employeerostering.employeerostering.Employee>
      <name>John</name>
      <skills>
        <employeerostering.employeerostering.Skill>
          <name>reading</name>
        </employeerostering.employeerostering.Skill>
      </skills>
    </employeerostering.employeerostering.Employee>
    <employeerostering.employeerostering.Employee>
      <name>Mary</name>
      <skills>
        <employeerostering.employeerostering.Skill>
          <name>writing</name>
        </employeerostering.employeerostering.Skill>
      </skills>
    </employeerostering.employeerostering.Employee>
    <employeerostering.employeerostering.Employee>
      <name>Petr</name>
      <skills>
        <employeerostering.employeerostering.Skill>
          <name>speaking</name>
        </employeerostering.employeerostering.Skill>
      </skills>
    </employeerostering.employeerostering.Employee>
  </employeeList>
  <shiftList>
    <employeerostering.employeerostering.Shift>
      <timeslot>
        <startTime>2017-01-01T00:00:00</startTime>
        <endTime>2017-01-01T01:00:00</endTime>
      </timeslot>
      <requiredSkill reference="../../../employeeList/employeerostering.employeerostering.Employee/skills/employeerostering.employeerostering.Skill"/>
    </employeerostering.employeerostering.Shift>
    <employeerostering.employeerostering.Shift>
      <timeslot reference="../../employeerostering.employeerostering.Shift/timeslot"/>
      <requiredSkill reference="../../../employeeList/employeerostering.employeerostering.Employee[3]/skills/employeerostering.employeerostering.Skill"/>
    </employeerostering.employeerostering.Shift>
    <employeerostering.employeerostering.Shift>
      <timeslot reference="../../employeerostering.employeerostering.Shift/timeslot"/>
      <requiredSkill reference="../../../employeeList/employeerostering.employeerostering.Employee[2]/skills/employeerostering.employeerostering.Skill"/>
    </employeerostering.employeerostering.Shift>
  </shiftList>
  <skillList>
    <employeerostering.employeerostering.Skill reference="../../employeeList/employeerostering.employeerostering.Employee/skills/employeerostering.employeerostering.Skill"/>
    <employeerostering.employeerostering.Skill reference="../../employeeList/employeerostering.employeerostering.Employee[3]/skills/employeerostering.employeerostering.Skill"/>
    <employeerostering.employeerostering.Skill reference="../../employeeList/employeerostering.employeerostering.Employee[2]/skills/employeerostering.employeerostering.Skill"/>
  </skillList>
  <timeslotList>
    <employeerostering.employeerostering.Timeslot reference="../../shiftList/employeerostering.employeerostering.Shift/timeslot"/>
  </timeslotList>
  <dayOffRequestList/>
  <shiftAssignmentList>
    <employeerostering.employeerostering.ShiftAssignment>
      <shift reference="../../../shiftList/employeerostering.employeerostering.Shift"/>
    </employeerostering.employeerostering.ShiftAssignment>
    <employeerostering.employeerostering.ShiftAssignment>
      <shift reference="../../../shiftList/employeerostering.employeerostering.Shift[3]"/>
    </employeerostering.employeerostering.ShiftAssignment>
    <employeerostering.employeerostering.ShiftAssignment>
      <shift reference="../../../shiftList/employeerostering.employeerostering.Shift[2]"/>
    </employeerostering.employeerostering.ShiftAssignment>
  </shiftAssignmentList>
</employeerostering.employeerostering.EmployeeRoster>

b4:
<planning-problem class="clouddepartment.cloudbalancing.CloudBalance" id="1">
  <id>0</id>
  <computerList id="2">
    <clouddepartment.cloudbalancing.CloudComputer id="3">
      <id>0</id>
      <cpuPower>24</cpuPower>
      <memory>96</memory>
      <networkBandwidth>16</networkBandwidth>
      <cost>4800</cost>
    </clouddepartment.cloudbalancing.CloudComputer>
    <clouddepartment.cloudbalancing.CloudComputer id="4">
      <id>1</id>
      <cpuPower>6</cpuPower>
      <memory>4</memory>
      <networkBandwidth>6</networkBandwidth>
      <cost>660</cost>
    </clouddepartment.cloudbalancing.CloudComputer>
  </computerList>
  <processList id="5">
    <clouddepartment.cloudbalancing.CloudProcess id="6">
      <id>0</id>
      <requiredCpuPower>1</requiredCpuPower>
      <requiredMemory>1</requiredMemory>
      <requiredNetworkBandwidth>1</requiredNetworkBandwidth>
    </clouddepartment.cloudbalancing.CloudProcess>
    <clouddepartment.cloudbalancing.CloudProcess id="7">
      <id>1</id>
      <requiredCpuPower>3</requiredCpuPower>
      <requiredMemory>6</requiredMemory>
      <requiredNetworkBandwidth>1</requiredNetworkBandwidth>
    </clouddepartment.cloudbalancing.CloudProcess>
    <clouddepartment.cloudbalancing.CloudProcess id="8">
      <id>2</id>
      <requiredCpuPower>1</requiredCpuPower>
      <requiredMemory>1</requiredMemory>
      <requiredNetworkBandwidth>3</requiredNetworkBandwidth>
    </clouddepartment.cloudbalancing.CloudProcess>
    <clouddepartment.cloudbalancing.CloudProcess id="9">
      <id>3</id>
      <requiredCpuPower>1</requiredCpuPower>
      <requiredMemory>2</requiredMemory>
      <requiredNetworkBandwidth>11</requiredNetworkBandwidth>
    </clouddepartment.cloudbalancing.CloudProcess>
    <clouddepartment.cloudbalancing.CloudProcess id="10">
      <id>4</id>
      <requiredCpuPower>1</requiredCpuPower>
      <requiredMemory>1</requiredMemory>
      <requiredNetworkBandwidth>1</requiredNetworkBandwidth>
    </clouddepartment.cloudbalancing.CloudProcess>
    <clouddepartment.cloudbalancing.CloudProcess id="11">
      <id>5</id>
      <requiredCpuPower>1</requiredCpuPower>
      <requiredMemory>1</requiredMemory>
      <requiredNetworkBandwidth>5</requiredNetworkBandwidth>
    </clouddepartment.cloudbalancing.CloudProcess>
  </processList>
</planning-problem>

after: (Sam: 2 computers; 6 processes)
<planning-problem class="optacloud.optacloud.CloudSolution" id="1">
  <id>0</id>
  <computerList id="2">
    <optacloud.optacloud.Computer id="3">
      <id>0</id>
      <cpuPower>24</cpuPower>
      <memory>96</memory>
      <networkBandwidth>16</networkBandwidth>
      <cost>4800</cost>
    </optacloud.optacloud.Computer>
    <optacloud.optacloud.Computer id="4">
      <id>1</id>
      <cpuPower>6</cpuPower>
      <memory>4</memory>
      <networkBandwidth>6</networkBandwidth>
      <cost>660</cost>
    </optacloud.optacloud.Computer>
  </computerList>
  <processList id="5">
    <optacloud.optacloud.Process id="6">
      <id>0</id>
      <requiredCpuPower>1</requiredCpuPower>
      <requiredMemory>1</requiredMemory>
      <requiredNetworkBandwidth>1</requiredNetworkBandwidth>
    </optacloud.optacloud.Process>
    <optacloud.optacloud.Process id="7">
      <id>1</id>
      <requiredCpuPower>3</requiredCpuPower>
      <requiredMemory>6</requiredMemory>
      <requiredNetworkBandwidth>1</requiredNetworkBandwidth>
    </optacloud.optacloud.Process>
    <optacloud.optacloud.Process id="8">
      <id>2</id>
      <requiredCpuPower>1</requiredCpuPower>
      <requiredMemory>1</requiredMemory>
      <requiredNetworkBandwidth>3</requiredNetworkBandwidth>
    </optacloud.optacloud.Process>
    <optacloud.optacloud.Process id="9">
      <id>3</id>
      <requiredCpuPower>1</requiredCpuPower>
      <requiredMemory>2</requiredMemory>
      <requiredNetworkBandwidth>11</requiredNetworkBandwidth>
    </optacloud.optacloud.Process>
    <optacloud.optacloud.Process id="10">
      <id>4</id>
      <requiredCpuPower>1</requiredCpuPower>
      <requiredMemory>1</requiredMemory>
      <requiredNetworkBandwidth>1</requiredNetworkBandwidth>
    </optacloud.optacloud.Process>
    <optacloud.optacloud.Process id="11">
      <id>5</id>
      <requiredCpuPower>1</requiredCpuPower>
      <requiredMemory>1</requiredMemory>
      <requiredNetworkBandwidth>5</requiredNetworkBandwidth>
    </optacloud.optacloud.Process>
  </processList>
</planning-problem>


-- Modify Project in KIE Workbench --

1) Add field: id type: long to three Data Objects: CloudSolution, Computer, Process
2) Comment all code in unused Java test script: example-OptaCloud/src/test/java/optacloud/optacloud/SolverTest.java
3) [Optional] Insert two imports into drools rule file: example-OptaCloud/src/main/resources/optacloud/optacloud/cloudScoreRules.drl 
    import org.optaplanner.core.api.score.buildin.hardsoft.HardSoftScoreHolder;
    import optacloud.optacloud.CloudSolution;


-- POST Results --

Expires →0
Cache-Control →no-cache, no-store, must-revalidate
X-Powered-By →Undertow/1
Server →WildFly/11
Pragma →no-cache
Date →Wed, 13 Feb 2019 10:37:02 GMT
Connection →keep-alive
X-KIE-ConversationId →%27sample-server%27%3A%27optacloud_1.0.0-SNAPSHOT%27%3A%27optacloud%3Aoptacloud%3A1.0.0-SNAPSHOT%27%3A%27e6e86a6c-40a8-4297-a47d-b7eb44cc69ab%27
Content-Type →application/xml;charset=UTF-8
Content-Length →0


== GET ==


-- End Point --

ref:
GET http://localhost:8080/kie-server/services/rest/server/containers/employeerostering_1.0.0-SNAPSHOT/solvers/EmployeeRosteringSolver/bestsolution
b4:
GET http://localhost:8080/kie-server/services/rest/server/containers/cloudbalancing/solvers/cloudBalancingSolver/bestsolution
after:
GET http://localhost:8080/kie-server/services/rest/server/containers/optacloud_1.0.0-SNAPSHOT/solvers/cloudBalancingSolver/bestsolution


-- GET Results --

<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<solver-instance>
    <container-id>optacloud_1.0.0-SNAPSHOT</container-id>
    <solver-id>cloudBalancingSolver</solver-id>
    <solver-config-file>optacloud/optacloud/cloudSolverConfig.solver.xml</solver-config-file>
    <status>NOT_SOLVING</status>
    <score scoreClass="org.optaplanner.core.api.score.buildin.hardsoft.HardSoftScore">0hard/-5460soft</score>
    <best-solution xsi:type="cloudSolution" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
        <computerList>
            <cost>4800</cost>
            <cpuPower>24</cpuPower>
            <id>0</id>
            <memory>96</memory>
            <networkBandwidth>16</networkBandwidth>
        </computerList>
        <computerList>
            <cost>660</cost>
            <cpuPower>6</cpuPower>
            <id>1</id>
            <memory>4</memory>
            <networkBandwidth>6</networkBandwidth>
        </computerList>
        <processList>
            <computer>
                <cost>660</cost>
                <cpuPower>6</cpuPower>
                <id>1</id>
                <memory>4</memory>
                <networkBandwidth>6</networkBandwidth>
            </computer>
            <id>0</id>
            <requiredCpuPower>1</requiredCpuPower>
            <requiredMemory>1</requiredMemory>
            <requiredNetworkBandwidth>1</requiredNetworkBandwidth>
        </processList>
        <processList>
            <computer>
                <cost>4800</cost>
                <cpuPower>24</cpuPower>
                <id>0</id>
                <memory>96</memory>
                <networkBandwidth>16</networkBandwidth>
            </computer>
            <id>1</id>
            <requiredCpuPower>3</requiredCpuPower>
            <requiredMemory>6</requiredMemory>
            <requiredNetworkBandwidth>1</requiredNetworkBandwidth>
        </processList>
        <processList>
            <computer>
                <cost>4800</cost>
                <cpuPower>24</cpuPower>
                <id>0</id>
                <memory>96</memory>
                <networkBandwidth>16</networkBandwidth>
            </computer>
            <id>2</id>
            <requiredCpuPower>1</requiredCpuPower>
            <requiredMemory>1</requiredMemory>
            <requiredNetworkBandwidth>3</requiredNetworkBandwidth>
        </processList>
        <processList>
            <computer>
                <cost>4800</cost>
                <cpuPower>24</cpuPower>
                <id>0</id>
                <memory>96</memory>
                <networkBandwidth>16</networkBandwidth>
            </computer>
            <id>3</id>
            <requiredCpuPower>1</requiredCpuPower>
            <requiredMemory>2</requiredMemory>
            <requiredNetworkBandwidth>11</requiredNetworkBandwidth>
        </processList>
        <processList>
            <computer>
                <cost>4800</cost>
                <cpuPower>24</cpuPower>
                <id>0</id>
                <memory>96</memory>
                <networkBandwidth>16</networkBandwidth>
            </computer>
            <id>4</id>
            <requiredCpuPower>1</requiredCpuPower>
            <requiredMemory>1</requiredMemory>
            <requiredNetworkBandwidth>1</requiredNetworkBandwidth>
        </processList>
        <processList>
            <computer>
                <cost>660</cost>
                <cpuPower>6</cpuPower>
                <id>1</id>
                <memory>4</memory>
                <networkBandwidth>6</networkBandwidth>
            </computer>
            <id>5</id>
            <requiredCpuPower>1</requiredCpuPower>
            <requiredMemory>1</requiredMemory>
            <requiredNetworkBandwidth>5</requiredNetworkBandwidth>
        </processList>
        <score>0hard/-5460soft</score>
        <id>0</id>
    </best-solution>
</solver-instance>


Expires →0
Cache-Control →no-cache, no-store, must-revalidate
X-Powered-By →Undertow/1
Server →WildFly/11
Pragma →no-cache
Date →Wed, 13 Feb 2019 10:46:54 GMT
Connection →keep-alive
X-KIE-ConversationId →%27sample-server%27%3A%27optacloud_1.0.0-SNAPSHOT%27%3A%27optacloud%3Aoptacloud%3A1.0.0-SNAPSHOT%27%3A%271a6afa07-220f-4d12-9695-1c3cb2591906%27
Content-Type →application/xml;charset=UTF-8
Content-Length →3881


